---
import { Send } from 'lucide-react';
---

<section id="contact" class="py-16 px-6 max-w-7xl mx-auto">
    <div class="bg-white rounded-[2rem] p-8 md:p-12 shadow-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-gray-900">Get in Touch</h2>
                <p class="text-lg text-gray-600 leading-relaxed">
                    Have a project in mind or want to discuss how we can help your business grow?
                    Fill out the form and we'll get back to you as soon as possible.
                </p>
            </div>

            <div id="contact-success" class="hidden space-y-4 bg-gray-50 p-6 md:p-8 rounded-2xl text-center">
                <div class="w-16 h-16 bg-primary/20 text-primary rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                </div>
                <h3 class="text-2xl font-bold text-gray-900">Message Sent!</h3>
                <p class="text-gray-600">Thank you for reaching out. We'll get back to you shortly.</p>
                <button
                    id="reset-form"
                    class="mt-4 text-sm font-medium text-primary hover:underline"
                >
                    Send another message
                </button>
            </div>

            <form
                id="contact-form"
                class="space-y-6 bg-gray-50 p-6 md:p-8 rounded-2xl"
            >
                <div>
                    <label for="subject" class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                    <input
                        type="text"
                        name="subject"
                        id="subject"
                        required
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white"
                        placeholder="What is this regarding?"
                    />
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                    <input
                        type="email"
                        name="email"
                        id="email"
                        required
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white"
                        placeholder="you@example.com"
                    />
                </div>

                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                    <textarea
                        name="description"
                        id="description"
                        rows="4"
                        required
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white resize-none"
                        placeholder="Tell us about your vision. We're ready to help you innovate and scale your business with our expertise in automation and agentic solutions."
                    ></textarea>
                </div>

                <button
                    type="submit"
                    id="submit-button"
                    class="w-full bg-black text-white font-medium py-3 px-6 rounded-xl hover:bg-gray-800 transition-colors flex items-center justify-center gap-2 group"
                >
                    <span id="button-text">Send Message</span>
                    <Send className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
                </button>
            </form>
        </div>
    </div>
</section>

<script>
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const successMessage = document.getElementById('contact-success');
    const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
    const buttonText = document.getElementById('button-text');
    const resetButton = document.getElementById('reset-form');

    if (form && successMessage && submitButton && buttonText) {
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Set loading state
            submitButton.disabled = true;
            if (buttonText) buttonText.textContent = 'Sending...';

            const formData = new FormData(form);
            const data = Object.fromEntries(formData);

            // Log for debug (as requested to handle by JS, this shows it's working)
            console.log('Form submission:', data);

            // Simulate a delay for the "sending" feel
            await new Promise(resolve => setTimeout(resolve, 1000));

            // Hide form and show success message
            form.classList.add('hidden');
            successMessage.classList.remove('hidden');

            // Reset button state for next time
            submitButton.disabled = false;
            if (buttonText) buttonText.textContent = 'Send Message';
            form.reset();
        });
    }

    if (resetButton && form && successMessage) {
        resetButton.addEventListener('click', () => {
            successMessage.classList.add('hidden');
            form.classList.remove('hidden');
        });
    }
</script>
