---
import { Image } from 'astro:assets';
import FormattedDate from './FormattedDate.astro';

interface Props {
    title: string;
    href: string;
    pubDate: Date;
    heroImage?: ImageMetadata | string;
    description?: string;
}

const { title, href, pubDate, heroImage, description } = Astro.props;
---

<article class="bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 ease-in-out hover:-translate-y-1 overflow-hidden group h-full">
    <a href={href} class="block h-full flex flex-col">
        <div class="relative aspect-[16/9] overflow-hidden shrink-0">
            {heroImage ? (
                typeof heroImage === 'string' ? (
                    <Image 
                        width={720} 
                        height={360} 
                        src={heroImage} 
                        alt={title} 
                        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                    />
                ) : (
                    <Image 
                        src={heroImage} 
                        alt={title} 
                        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                    />
                )
            ) : (
                <div class="w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center">
                    <svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                </div>
            )}
        </div>
        <div class="p-6 flex flex-col flex-grow">
            <p class="text-sm text-gray-500 mb-2 font-medium">
                <FormattedDate date={pubDate} />
            </p>
            <h4 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-primary transition-colors line-clamp-2">
                {title}
            </h4>
            {description && (
                <p class="text-gray-600 text-sm line-clamp-2">{description}</p>
            )}
        </div>
    </a>
</article>
